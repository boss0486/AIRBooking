@using WebCore.Entities;
@using WebCore.Services;
@using Helper.Language;
@{
    ViewBag.Title = Helper.Page.MetaSEO.MetaTitle;
}
@{
    try
    {
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-12 bg-success">
                    <div class="form-group">
                        <br />
                        Tất cả các chặng bay đủ điều kiều kiện, sẽ được áp dụng giá thấp nhất.
                    </div>
                </div>
            </div>
        </div>

        int planeNoFrom = 0;
        int planeNoTo = 0;
        string eventStart = string.Empty;
        string eventEnd = string.Empty;
        bool isApplied = false;
        string conditionId = string.Empty;
        //
        AirTicketConditionFeeService airTicketConditionFeeService = new AirTicketConditionFeeService();
        AirTicketConditionFee airTicketConditionFee = airTicketConditionFeeService.GetAirTicketConditionByConditionID("04");
        if (airTicketConditionFee != null)
        {
            planeNoFrom = airTicketConditionFee.PlaneNoFrom;
            planeNoTo = airTicketConditionFee.PlaneNoTo;
            if (airTicketConditionFee.TimeStart != null)
            {
                eventStart = Helper.Time.TimeHelper.FormatToDate(Convert.ToDateTime(airTicketConditionFee.TimeStart), Helper.Language.LanguageCode.Vietnamese.ID);
            }
            if (airTicketConditionFee.TimeEnd != null)
            {
                eventEnd = Helper.Time.TimeHelper.FormatToDate(Convert.ToDateTime(airTicketConditionFee.TimeEnd), Helper.Language.LanguageCode.Vietnamese.ID);
            }
            isApplied = airTicketConditionFee.IsApplied;
            conditionId = airTicketConditionFee.ConditionID;
        }

        <div class="row">
            <div id="form04" class="col-md-6 m-t-30">
                <div class="top-pic mgb-10">
                    <label><i class="fas fa-cog" aria-hidden="true"></i> Điều kiện 04:</label>
                </div>
                <div class="form-group">
                    <label class="form-label">Thời gian áp dụng:</label>
                    <div class="input-daterange input-group">
                        <input type="text" class="form-control" id="txtStartNo04" placeholder="Số hiệu" maxlength="10" value="@planeNoFrom" />
                        <span class="input-group-addon"><i class="far fa-arrow-alt-circle-right"></i></span>
                        <input type="text" class="form-control" id="txtEndNo04" placeholder="Số hiệu" maxlength="10" value="@planeNoTo" />
                    </div>
                    <span id="lblAircraftNo04" class="message msg-box"></span>
                </div>
                <div class="form-group">
                    <label class="form-label">Thời gian áp dụng:</label>
                    <div class="input-daterange input-group" id="datepicker">
                        <input type="text" class="form-control" data-date="true" id="txtStartDate04" placeholder="dd-mm-yyyy" maxlength="10" value="@eventStart" />
                        <span class="input-group-addon"><i class="far fa-arrow-alt-circle-right"></i></span>
                        <input type="text" class="form-control" data-date="true" id="txtEndDate04" placeholder="dd-mm-yyyy" maxlength="10" value="@eventEnd" />
                    </div>
                    <span id="lblApplyNo04" class="message msg-box"></span>
                </div>
                <div class="form-group text-right">
                    <button id="btEventEnd04" type="button" class="btn btn-danger" data-conditionId="@conditionId">Không áp dụng</button>
                    <button id="btnApply04" type="button" class="btn btn-primary">Áp dụng</button>
                </div>

                @*<div class="form-group">
                        <label class="form-label">Thời gian áp dụng:</label>
                        <div class="input-group">
                            <div class="input-daterange input-group" style="margin-bottom:0px;">
                                <input type="text" class="form-control" id="txtStartDate04" placeholder="dd-mm-yyyy" maxlength="10" />
                                <span class="input-group-addon"><i class="far fa-arrow-alt-circle-right"></i></span>
                                <input type="text" class="form-control" id="txtEndDate04" placeholder="dd-mm-yyyy" maxlength="10" />
                            </div>
                            <span class="input-group-btn">
                                <button id="btnFeeApply" type="button" class="btn btn-primary" data-disable-with="Search">Áp dụng</button>
                            </span>
                        </div>
                    </div>*@
                <div class="form-group">
                    <p id="applieState04">
                        @if (isApplied)
                        {
                            <i class="far fa-hand-point-right"></i> <label class="col-green">Đang áp dụng</label>
                        }
                        else
                        {
                            <i class="far fa-hand-point-right"></i> <label class="col-pink">Không áp dụng</label>
                        }
                    </p>
                    <p><i>Tất cả các máy bay có số hiệu trong khoảng được cấu hình, sẽ được áp dụng giá thấp nhất.</i></p>
                    <hr />
                </div>
            </div>
        </div>

    }
    catch (Exception)
    {


    }

}

@section scripts{
    <script src="~/Areas/Management/_script/condition-fee.js"></script>
}